<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SesgosCognitivos - Entrena tu mente para invertir mejor</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --info-color: #17a2b8;
            --light-bg: #ecf0f1;
            --dark-text: #2c3e50;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--light-bg);
            color: var(--dark-text);
        }

        .navbar {
            background-color: var(--primary-color) !important;
            box-shadow: 0 2px 4px rgba(0,0,0,.1);
        }

        .navbar-brand {
            font-weight: bold;
            font-size: 1.5rem;
        }

        .hero-section {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 80px 0;
            text-align: center;
        }

        .hero-section h1 {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .hero-section p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .bias-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .bias-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,.2);
        }

        .bias-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            color: var(--secondary-color);
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-color);
            margin: 50px 0 30px;
            text-align: center;
        }

        .test-question {
            background: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,.1);
        }

        .option-btn {
            width: 100%;
            margin: 10px 0;
            padding: 15px;
            border: 2px solid var(--secondary-color);
            background: white;
            color: var(--secondary-color);
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .option-btn:hover {
            background: var(--secondary-color);
            color: white;
        }

        .option-btn.selected {
            background: var(--secondary-color);
            color: white;
        }

        .progress-bar-custom {
            height: 30px;
            background-color: var(--light-bg);
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary-color), var(--success-color));
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .tip-card {
            background: linear-gradient(135deg, var(--warning-color), var(--accent-color));
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .simulation-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,.1);
        }

        .hidden {
            display: none !important;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .result-card {
            background: white;
            padding: 30px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,.1);
            text-align: center;
        }

        .bias-explanation {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid var(--secondary-color);
        }

        .exercise-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,.1);
            border-left: 5px solid var(--info-color);
        }

        .scenario-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,.1);
            transition: all 0.3s ease;
        }

        .scenario-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,.15);
        }

        .difficulty-badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-left: 10px;
        }

        .difficulty-easy {
            background-color: var(--success-color);
            color: white;
        }

        .difficulty-medium {
            background-color: var(--warning-color);
            color: white;
        }

        .difficulty-hard {
            background-color: var(--accent-color);
            color: white;
        }

        .training-progress {
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }

        .level-indicator {
            display: inline-block;
            padding: 5px 15px;
            background: rgba(255,255,255,0.2);
            border-radius: 20px;
            margin: 0 5px;
        }

        .feedback-correct {
            background-color: var(--success-color);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .feedback-incorrect {
            background-color: var(--accent-color);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .score-display {
            font-size: 2rem;
            font-weight: bold;
            color: var(--secondary-color);
        }

        .completion-summary {
            background: linear-gradient(135deg, var(--success-color), var(--info-color));
            color: white;
            padding: 40px;
            border-radius: 15px;
            margin: 30px 0;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,.2);
        }

        .completion-summary h3 {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        .learning-points {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: left;
        }

        .learning-points h5 {
            color: #fff;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .learning-points ul {
            list-style: none;
            padding: 0;
        }

        .learning-points li {
            margin: 10px 0;
            padding-left: 25px;
            position: relative;
        }

        .learning-points li:before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: #fff;
            font-weight: bold;
        }

        .navigation-buttons {
            margin-top: 30px;
        }

        .nav-btn {
            margin: 10px;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,.2);
        }

        .achievement-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 25px;
            margin: 10px;
            font-weight: bold;
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: var(--success-color);
            position: absolute;
            animation: confetti-fall 3s linear infinite;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .test-selector {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,.1);
            text-align: center;
        }

        .test-option {
            background: linear-gradient(135deg, var(--secondary-color), var(--info-color));
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .test-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,.2);
        }

        .test-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            margin-left: 10px;
        }

        .random-test-btn {
            background: linear-gradient(135deg, var(--warning-color), var(--accent-color));
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            margin: 20px 10px;
            transition: all 0.3s ease;
        }

        .random-test-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,.2);
            color: white;
        }

        .test-history {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #dee2e6;
        }

        .history-item:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="#"><i class="fas fa-brain"></i> SesgosCognitivos</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('home')">Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('biases')">Sesgos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('test')">Test</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('training')">Entrenamiento</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('scenarios')">Escenarios</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('tips')">Consejos</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero-section">
        <div class="container">
            <h1><i class="fas fa-brain"></i> Entrena tu mente para invertir mejor</h1>
            <p class="lead">Descubre cÃ³mo los sesgos cognitivos afectan tus decisiones de inversiÃ³n y aprende a controlarlos con ejercicios personalizados.</p>
            <div class="mt-4">
                <button class="btn btn-light btn-lg me-3" onclick="showSection('test')">
                    <i class="fas fa-clipboard-check"></i> Comenzar Test
                </button>
                <button class="btn btn-outline-light btn-lg" onclick="showSection('training')">
                    <i class="fas fa-dumbbell"></i> Entrenamiento
                </button>
            </div>
        </div>
    </section>

    <!-- Sesgos Cognitivos Section -->
    <section id="biases" class="container mt-5 hidden">
        <h2 class="section-title">Sesgos Cognitivos en InversiÃ³n</h2>
        <div class="row">
            <div class="col-md-6 col-lg-4">
                <div class="bias-card" onclick="showBiasDetail('anclaje')">
                    <div class="bias-icon"><i class="fas fa-anchor"></i></div>
                    <h4>Efecto de Anclaje</h4>
                    <p>Las decisiones se ven influenciadas por la primera informaciÃ³n recibida.</p>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="bias-card" onclick="showBiasDetail('perdidas')">
                    <div class="bias-icon"><i class="fas fa-shield-alt"></i></div>
                    <h4>AversiÃ³n a las PÃ©rdidas</h4>
                    <p>Miedo a perder que lleva a evitar riesgos necesarios.</p>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="bias-card" onclick="showBiasDetail('confirmacion')">
                    <div class="bias-icon"><i class="fas fa-check-circle"></i></div>
                    <h4>Sesgo de ConfirmaciÃ³n</h4>
                    <p>Buscar informaciÃ³n que confirme nuestras creencias existentes.</p>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="bias-card" onclick="showBiasDetail('confianza')">
                    <div class="bias-icon"><i class="fas fa-crown"></i></div>
                    <h4>Exceso de Confianza</h4>
                    <p>SobreestimaciÃ³n de las propias habilidades y conocimientos.</p>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="bias-card" onclick="showBiasDetail('manada')">
                    <div class="bias-icon"><i class="fas fa-users"></i></div>
                    <h4>Mentalidad de Manada</h4>
                    <p>Decisions influenciadas por lo que hace la mayorÃ­a.</p>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="bias-card" onclick="showBiasDetail('dotacion')">
                    <div class="bias-icon"><i class="fas fa-gift"></i></div>
                    <h4>Efecto DotaciÃ³n</h4>
                    <p>Sobrevalorar lo que poseemos simplemente por ser nuestro.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Bias Detail Modal -->
    <div class="modal fade" id="biasModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="biasModalTitle"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="biasModalContent">
                </div>
            </div>
        </div>
    </div>

    <!-- Test Section -->
    <section id="test" class="container mt-5 hidden">
        <h2 class="section-title">EvaluaciÃ³n de Sesgos Cognitivos</h2>
        
        <div id="testSelector" class="test-selector">
            <h3><i class="fas fa-clipboard-list"></i> Elige tu tipo de evaluaciÃ³n</h3>
            <p class="lead">Selecciona un test especÃ­fico o dÃ©janos elegir uno aleatoriamente para ti</p>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="test-option" onclick="startTest('basico')">
                        <h5><i class="fas fa-play-circle"></i> Test BÃ¡sico</h5>
                        <p>EvaluaciÃ³n fundamental de sesgos en decisiones de inversiÃ³n</p>
                        <span class="test-badge">5 preguntas</span>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="test-option" onclick="startTest('emocional')">
                        <h5><i class="fas fa-heart"></i> Test Emocional</h5>
                        <p>Enfocado en cÃ³mo las emociones afectan tus decisiones</p>
                        <span class="test-badge">6 preguntas</span>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="test-option" onclick="startTest('escenarios')">
                        <h5><i class="fas fa-theater-masks"></i> Test de Escenarios</h5>
                        <p>Situaciones prÃ¡cticas de inversiÃ³n del mundo real</p>
                        <span class="test-badge">7 preguntas</span>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="test-option" onclick="startTest('avanzado')">
                        <h5><i class="fas fa-brain"></i> Test Avanzado</h5>
                        <p>EvaluaciÃ³n profunda de patrones de pensamiento</p>
                        <span class="test-badge">8 preguntas</span>
                    </div>
                </div>
            </div>
            
            <div class="mt-4">
                <button class="random-test-btn" onclick="startRandomTest()">
                    <i class="fas fa-random"></i> Test Aleatorio
                </button>
                <button class="random-test-btn" onclick="showTestHistory()">
                    <i class="fas fa-history"></i> Ver Historial
                </button>
            </div>
        </div>

        <div id="testInProgress" class="hidden">
            <div class="progress-bar-custom">
                <div class="progress-fill" id="progressBar" style="width: 0%">0%</div>
            </div>
            <div id="testContainer">
                <!-- Las preguntas se cargarÃ¡n dinÃ¡micamente -->
            </div>
        </div>

        <div id="testHistory" class="test-history hidden">
            <h4><i class="fas fa-history"></i> Historial de Tests</h4>
            <div id="historyContainer">
                <!-- Historial se cargarÃ¡ dinÃ¡micamente -->
            </div>
            <button class="btn btn-secondary mt-3" onclick="showTestSelector()">
                <i class="fas fa-arrow-left"></i> Volver a Selector
            </button>
        </div>
    </section>

    <!-- Training Section -->
    <section id="training" class="container mt-5 hidden">
        <h2 class="section-title">Entrenamiento Personalizado</h2>
        
        <div id="trainingIntro" class="result-card">
            <h3><i class="fas fa-dumbbell"></i> Tu Plan de Entrenamiento</h3>
            <p class="lead">Completa el test inicial para desbloquear tu plan de entrenamiento personalizado.</p>
            <button class="btn btn-primary btn-lg" onclick="showSection('test')">
                <i class="fas fa-play"></i> Realizar Test
            </button>
        </div>

        <div id="trainingContent" class="hidden">
            <div class="training-progress">
                <h4><i class="fas fa-chart-line"></i> Progreso de Entrenamiento</h4>
                <div>
                    <span class="level-indicator">Nivel <span id="currentLevel">1</span></span>
                    <span class="score-display">Puntos: <span id="trainingScore">0</span></span>
                </div>
                <div class="progress-bar-custom mt-3">
                    <div class="progress-fill" id="trainingProgressBar" style="width: 0%">0%</div>
                </div>
            </div>

            <div id="exercisesContainer">
                <!-- Ejercicios se cargarÃ¡n dinÃ¡micamente -->
            </div>
        </div>
    </section>

    <!-- Scenarios Section -->
    <section id="scenarios" class="container mt-5 hidden">
        <h2 class="section-title">Escenarios de InversiÃ³n</h2>
        <p class="text-center lead">Practica con situaciones reales y aprende a identificar tus sesgos en acciÃ³n.</p>
        
        <div class="row mt-4">
            <div class="col-md-6 col-lg-4">
                <div class="scenario-card" onclick="startScenario('crash')">
                    <div class="d-flex justify-content-between align-items-start">
                        <h5><i class="fas fa-chart-line"></i> Crash del Mercado</h5>
                        <span class="difficulty-badge difficulty-hard">DifÃ­cil</span>
                    </div>
                    <p>El mercado cae 20% en una semana. Â¿CÃ³mo reaccionas?</p>
                    <button class="btn btn-outline-primary btn-sm">Comenzar</button>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="scenario-card" onclick="startScenario('bubble')">
                    <div class="d-flex justify-content-between align-items-start">
                        <h5><i class="fas fa-bubble"></i> Burbuja TecnolÃ³gica</h5>
                        <span class="difficulty-badge difficulty-medium">Medio</span>
                    </div>
                    <p>Todos estÃ¡n comprando acciones de tecnologÃ­a. Â¿Te unes?</p>
                    <button class="btn btn-outline-primary btn-sm">Comenzar</button>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="scenario-card" onclick="startScenario('inheritance')">
                    <div class="d-flex justify-content-between align-items-start">
                        <h5><i class="fas fa-coins"></i> Herencia Inesperada</h5>
                        <span class="difficulty-badge difficulty-easy">FÃ¡cil</span>
                    </div>
                    <p>Recibes $50,000 de herencia. Â¿CÃ³mo los inviertes?</p>
                    <button class="btn btn-outline-primary btn-sm">Comenzar</button>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="scenario-card" onclick="startScenario('portfolio')">
                    <div class="d-flex justify-content-between align-items-start">
                        <h5><i class="fas fa-briefcase"></i> Rebalanceo de Cartera</h5>
                        <span class="difficulty-badge difficulty-medium">Medio</span>
                    </div>
                    <p>Tu cartera estÃ¡ desbalanceada. Â¿QuÃ© haces?</p>
                    <button class="btn btn-outline-primary btn-sm">Comenzar</button>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="scenario-card" onclick="startScenario('hotTip')">
                    <div class="d-flex justify-content-between align-items-start">
                        <h5><i class="fas fa-fire"></i> Tip de InversiÃ³n</h5>
                        <span class="difficulty-badge difficulty-easy">FÃ¡cil</span>
                    </div>
                    <p>Un amigo te da una "tip infalible". Â¿Lo sigues?</p>
                    <button class="btn btn-outline-primary btn-sm">Comenzar</button>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="scenario-card" onclick="startScenario('retirement')">
                    <div class="d-flex justify-content-between align-items-start">
                        <h5><i class="fas fa-piggy-bank"></i> Plan de Retiro</h5>
                        <span class="difficulty-badge difficulty-hard">DifÃ­cil</span>
                    </div>
                    <p>Planeas tu retiro a 30 aÃ±os. Â¿QuÃ© estrategia eliges?</p>
                    <button class="btn btn-outline-primary btn-sm">Comenzar</button>
                </div>
            </div>
        </div>

        <div id="scenarioContainer" class="simulation-container mt-4 hidden">
            <!-- El escenario se cargarÃ¡ dinÃ¡micamente -->
        </div>
    </section>

    <!-- Tips Section -->
    <section id="tips" class="container mt-5 hidden">
        <h2 class="section-title">Consejos y Estrategias</h2>
        <div class="row">
            <div class="col-md-6">
                <div class="tip-card">
                    <h4><i class="fas fa-lightbulb"></i> Consejo Diario</h4>
                    <p>Antes de tomar una decisiÃ³n de inversiÃ³n, hazte la pregunta: "Â¿Estoy siendo influenciado por algÃºn sesgo cognitivo?"</p>
                </div>
            </div>
            <div class="col-md-6">
                <div class="tip-card">
                    <h4><i class="fas fa-chart-line"></i> Estrategia PrÃ¡ctica</h4>
                    <p>MantÃ©n un diario de inversiones donde anotes tus decisiones y los sesgos que pudieron influir en ellas.</p>
                </div>
            </div>
        </div>

        <div class="mt-5">
            <h3 class="text-center">TÃ©cnicas para Controlar Sesgos</h3>
            <div class="row mt-4">
                <div class="col-md-4">
                    <div class="bias-explanation">
                        <h5><i class="fas fa-balance-scale"></i> AnÃ¡lisis Objectivo</h5>
                        <p>Busca activamente informaciÃ³n que contradiga tus creencias y analiza todos los puntos de vista antes de decidir.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="bias-explanation">
                        <h5><i class="fas fa-clock"></i> Espera 24 Horas</h5>
                        <p>Antes de tomar decisiones importantes, espera 24 horas para evitar decisiones impulsivas influenciadas por emociones.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="bias-explanation">
                        <h5><i class="fas fa-users-slash"></i> Evita la Manada</h5>
                        <p>No sigas ciegamente a la multitud. Investiga y forma tu propia opiniÃ³n basada en datos y anÃ¡lisis.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Datos de sesgos cognitivos
        const biasesData = {
            anclaje: {
                title: "Efecto de Anclaje",
                explanation: "El efecto de anclaje ocurre cuando las personas se basan demasiado en la primera informaciÃ³n que reciben (el 'ancla') al tomar decisiones.",
                economic: "En finanzas, esto lleva a los inversores a aferrarse al precio de compra de un activo, ignorando la informaciÃ³n actual del mercado.",
                example: "Compras acciones a $100 y aunque bajan a $70, te niegas a vender porque 'valen $100'.",
                strategy: "Siempre evalÃºa los activos basÃ¡ndote en su valor actual y perspectivas futuras, no en lo que pagaste por ellos.",
                keyLearnings: [
                    "El precio de compra no determina el valor actual",
                    "Las decisiones deben basarse en informaciÃ³n presente, no pasada",
                    "Es peligroso aferrarse a precios histÃ³ricos",
                    "El valor real de un activo cambia con el tiempo"
                ]
            },
            perdidas: {
                title: "AversiÃ³n a las PÃ©rdidas",
                explanation: "Las personas sienten el dolor de una pÃ©rdida mÃ¡s intensamente que el placer de una ganancia equivalente.",
                economic: "Esto causa que los inversores sean demasiado conservadores, evitando riesgos necesarios para obtener buenos retornos.",
                example: "Prefieres mantener tu dinero en efectivo con 0% de retorno antes que invertir en un fondo con 80% de probabilidad de ganar.",
                strategy: "Acepta que el riesgo es parte inherente de la inversiÃ³n. Diversifica para manejar el riesgo en lugar de evitarlo completamente.",
                keyLearnings: [
                    "El miedo a perder puede paralizar tus decisiones",
                    "No tomar riesgos tambiÃ©n es un riesgo (inflaciÃ³n)",
                    "La diversificaciÃ³n ayuda a manejar el riesgo",
                    "Las pÃ©rdidas son parte natural del proceso de inversiÃ³n"
                ]
            },
            confirmacion: {
                title: "Sesgo de ConfirmaciÃ³n",
                explanation: "Tendencia a buscar, interpretar y recordar informaciÃ³n que confirma nuestras creencias preexistentes.",
                economic: "Los inversores ignoran seÃ±ales de alerta sobre sus inversiones y solo prestan atenciÃ³n a las noticias positivas.",
                example: "Solo lees anÃ¡lisis favorables sobre la empresa en que invertiste, ignorando los informes negativos.",
                strategy: "Busca activamente informaciÃ³n que contradiga tus opiniones. Considera mÃºltiples perspectivas antes de decidir.",
                keyLearnings: [
                    "Debes buscar activamente informaciÃ³n contraria",
                    "La verdad estÃ¡ en todos los puntos de vista",
                    "Las crÃ­ticas son mÃ¡s valiosas que los elogios",
                    "Una decisiÃ³n informada requiere anÃ¡lisis completo"
                ]
            },
            confianza: {
                title: "Exceso de Confianza",
                explanation: "SobreestimaciÃ³n de las propias habilidades, conocimientos o capacidad de predecir el futuro.",
                economic: "Lleva a los inversores a tomar riesgos excesivos, comerciar con demasiada frecuencia y subestimar los riesgos.",
                example: "Crees que puedes 'ganarle al mercado' consistentemente a pesar de evidencia que muestra que pocos lo logran.",
                strategy: "SÃ© humilde sobre tus habilidades. Usa anÃ¡lisis riguroso y considera el consejo de expertos.",
                keyLearnings: [
                    "La humildad es clave en la inversiÃ³n",
                    "Nadie puede predecir el mercado consistentemente",
                    "El Ã©xito pasado no garantiza resultados futuros",
                    "La investigaciÃ³n rigurosa es mÃ¡s importante que el instinto"
                ]
            },
            manada: {
                title: "Mentalidad de Manada",
                explanation: "Tendencia a seguir las acciones y decisiones del grupo, incluso si son irracionales.",
                economic: "Crea burbujas especulativas y pÃ¡nicos de venta cuando todos siguen al grupo sin pensar.",
                example: "Compras una acciÃ³n solo porque 'todos lo estÃ¡n haciendo' sin investigar la empresa.",
                strategy: "Piensa de forma independiente. La popularidad no garantiza el Ã©xito de una inversiÃ³n.",
                keyLearnings: [
                    "La popularidad no equivale a buen valor",
                    "Las masas pueden estar equivocadas (burbujas)",
                    "El pensamiento independiente es tu mayor activo",
                    "Investiga por ti cuenta, no sigas ciegamente"
                ]
            },
            dotacion: {
                title: "Efecto DotaciÃ³n",
                explanation: "Las personas tienden a valorar mÃ¡s los objetos que poseen simplemente por el hecho de poseerlos.",
                economic: "Los inversores sobrevaloran las acciones que tienen en su cartera y se resisten a venderlas incluso cuando es racional hacerlo.",
                example: "Te aferras a acciones de bajo rendimiento porque 'son tuyas' aunque haya mejores oportunidades.",
                strategy: "EvalÃºa tus inversiones como si no las poseyeras. Â¿Las comprarÃ­as hoy al precio actual?",
                keyLearnings: [
                    "El valor sentimental nubla el juicio financiero",
                    "Debes evaluar las inversiones objetivamente",
                    "PregÃºntate: Â¿La comprarÃ­a hoy a este precio?",
                    "El apego emocional puede costarte dinero"
                ]
            }
        };

        // MÃºltiples tipos de test
        const testTypes = {
            basico: {
                name: "Test BÃ¡sico",
                questions: [
                    {
                        question: "Cuando una acciÃ³n que comprÃ© baja de precio, mi primera reacciÃ³n es:",
                        options: [
                            { text: "Vender rÃ¡pidamente para cortar pÃ©rdidas", bias: "perdidas" },
                            { text: "Esperar a que recupere el precio que paguÃ©", bias: "anclaje" },
                            { text: "Buscar informaciÃ³n que justifique mantenerla", bias: "confirmacion" },
                            { text: "Comprar mÃ¡s porque 'es una oportunidad'", bias: "confianza" }
                        ]
                    },
                    {
                        question: "Al decidir invertir en una acciÃ³n, yo:",
                        options: [
                            { text: "Investigo a fondo por mi cuenta", bias: "none" },
                            { text: "Pregunto a amigos y familiares quÃ© compraron", bias: "manada" },
                            { text: "ConfÃ­o en mi instinto y experiencia", bias: "confianza" },
                            { text: "Solo leo noticias positivas sobre la empresa", bias: "confirmacion" }
                        ]
                    },
                    {
                        question: "Si todos estÃ¡n comprando una acciÃ³n 'de moda', yo:",
                        options: [
                            { text: "Me siento presionado a comprar tambiÃ©n", bias: "manada" },
                            { text: "La evito porque debe ser una burbuja", bias: "none" },
                            { text: "La analizo objetivamente antes de decidir", bias: "none" },
                            { text: "ConfÃ­o en que la tendencia continuarÃ¡", bias: "confianza" }
                        ]
                    },
                    {
                        question: "Cuando tengo que vender una acciÃ³n:",
                        options: [
                            { text: "Vendo las ganadoras rÃ¡pido y mantengo las perdedoras", bias: "perdidas" },
                            { text: "Espero a recuperar mi inversiÃ³n inicial", bias: "anclaje" },
                            { text: "Vendo segÃºn mi anÃ¡lisis objetivo", bias: "none" },
                            { text: "Me cuesta vender porque 'son mÃ­as'", bias: "dotacion" }
                        ]
                    },
                    {
                        question: "Mi enfoque ante el riesgo es:",
                        options: [
                            { text: "Evito el riesgo a toda costa", bias: "perdidas" },
                            { text: "Acepto riesgos calculados basados en anÃ¡lisis", bias: "none" },
                            { text: "ConfÃ­o en que todo saldrÃ¡ bien", bias: "confianza" },
                            { text: "Solo tomo riesgos si otros lo hacen", bias: "manada" }
                        ]
                    }
                ]
            },
            emocional: {
                name: "Test Emocional",
                questions: [
                    {
                        question: "Cuando el mercado estÃ¡ muy volÃ¡til, yo:",
                        options: [
                            { text: "Me pongo nervioso/a y vendo todo", bias: "perdidas" },
                            { text: "Mantengo la calma y sigo mi plan", bias: "none" },
                            { text: "Compro mÃ¡s porque 'es una oportunidad'", bias: "confianza" },
                            { text: "Espero a ver quÃ© hacen los demÃ¡s", bias: "manada" }
                        ]
                    },
                    {
                        question: "DespuÃ©s de una gran pÃ©rdida, mi reacciÃ³n es:",
                        options: [
                            { text: "Nunca mÃ¡s invierto en eso", bias: "anclaje" },
                            { text: "Analizo quÃ© aprendÃ­ del error", bias: "none" },
                            { text: "Busco culpables externos", bias: "confirmacion" },
                            { text: "Trato de recuperar lo perdido rÃ¡pido", bias: "perdidas" }
                        ]
                    },
                    {
                        question: "Cuando una inversiÃ³n mÃ­a tiene grandes ganancias:",
                        options: [
                            { text: "Vendo inmediatamente para asegurar", bias: "perdidas" },
                            { text: "Me siento invencible y arriesgo mÃ¡s", bias: "confianza" },
                            { text: "Mantengo y sigo monitoreando", bias: "none" },
                            { text: "Recomiendo a todos que compren", bias: "manada" }
                        ]
                    },
                    {
                        question: "Si un amigo tiene Ã©xito con una inversiÃ³n:",
                        options: [
                            { text: "Copio exactamente lo que hizo", bias: "manada" },
                            { text: "Analizo si funciona para mi caso", bias: "none" },
                            { text: "Me siento mal por no haberlo hecho", bias: "anclaje" },
                            { text: "Busco razones por las que no funcionarÃ¡", bias: "confirmacion" }
                        ]
                    },
                    {
                        question: "Cuando leo noticias negativas sobre mis inversiones:",
                        options: [
                            { text: "Las ignoro, son falsas", bias: "confirmacion" },
                            { text: "Las analizo objetivamente", bias: "none" },
                            { text: "Vendo inmediatamente por pÃ¡nico", bias: "perdidas" },
                            { text: "Espero a que otros vendan primero", bias: "manada" }
                        ]
                    },
                    {
                        question: "Mi relaciÃ³n con el dinero es:",
                        options: [
                            { text: "Lo ahorro mucho, no me gusta arriesgar", bias: "perdidas" },
                            { text: "Lo invierto con cuidado y estrategia", bias: "none" },
                            { text: "ConfÃ­o en que siempre tendrÃ© mÃ¡s", bias: "confianza" },
                            { text: "Sigo lo que hacen los exitosos", bias: "manada" }
                        ]
                    }
                ]
            },
            escenarios: {
                name: "Test de Escenarios",
                questions: [
                    {
                        question: "Recibes un bono de $5,000. Â¿QuÃ© haces?",
                        options: [
                            { text: "Lo guardo en efectivo por seguridad", bias: "perdidas" },
                            { text: "Lo invierto en lo que recomienda mi broker", bias: "manada" },
                            { text: "Investigo las mejores opciones para mi perfil", bias: "none" },
                            { text: "Lo invierto en lo que me dio ganancias antes", bias: "anclaje" }
                        ]
                    },
                    {
                        question: "Una acciÃ³n que compraste sube 50% en un mes. Â¿QuÃ© haces?",
                        options: [
                            { text: "Vendo todo para asegurar ganancias", bias: "perdidas" },
                            { text: "Compro mÃ¡s porque la tendencia es buena", bias: "confianza" },
                            { text: "Mantengo y reviso los fundamentos", bias: "none" },
                            { text: "Espero a que todos vendan primero", bias: "manada" }
                        ]
                    },
                    {
                        question: "El mercado cae 15% en un dÃ­a. Tu reacciÃ³n:",
                        options: [
                            { text: "Vendo todo para evitar mÃ¡s pÃ©rdidas", bias: "perdidas" },
                            { text: "Compro mÃ¡s porque estÃ¡ barato", bias: "confianza" },
                            { text: "Reviso mi estrategia a largo plazo", bias: "none" },
                            { text: "Espero a ver quÃ© hacen los expertos", bias: "manada" }
                        ]
                    },
                    {
                        question: "Todos en tu trabajo estÃ¡n invirtiendo en cripto. TÃº:",
                        options: [
                            { text: "Invierto tambiÃ©n para no quedar afuera", bias: "manada" },
                            { text: "Estudio si tiene sentido para mÃ­", bias: "none" },
                            { text: "La evito porque es muy arriesgado", bias: "perdidas" },
                            { text: "ConfÃ­o en mi instinto sobre cuÃ¡ndo entrar", bias: "confianza" }
                        ]
                    },
                    {
                        question: "Tienes que vender parte de tu cartera. Â¿CuÃ¡l vendes?",
                        options: [
                            { text: "La que tiene menos ganancias", bias: "anclaje" },
                            { text: "La que peor fundamentales tiene", bias: "none" },
                            { text: "Ninguna, espero a recuperar", bias: "perdidas" },
                            { text: "La que menos me gusta emocionalmente", bias: "dotacion" }
                        ]
                    },
                    {
                        question: "Un analista recomienda vender una acciÃ³n que tienes. TÃº:",
                        options: [
                            { text: "Vendo inmediatamente, es un experto", bias: "manada" },
                            { text: "Busco opiniones que confirmen mantener", bias: "confirmacion" },
                            { text: "Analizo los argumentos del analista", bias: "none" },
                            { text: "Ignoro la recomendaciÃ³n", bias: "confianza" }
                        ]
                    },
                    {
                        question: "Herencias $100,000. Tu estrategia:",
                        options: [
                            { text: "Lo pongo en el banco mÃ¡s seguro", bias: "perdidas" },
                            { text: "Sigo la estrategia de inversores famosos", bias: "manada" },
                            { text: "Busco asesorÃ­a profesional", bias: "none" },
                            { text: "Invierto como lo hice con Ã©xito antes", bias: "anclaje" }
                        ]
                    }
                ]
            },
            avanzado: {
                name: "Test Avanzado",
                questions: [
                    {
                        question: "Al evaluar una oportunidad de inversiÃ³n, mi proceso es:",
                        options: [
                            { text: "Comparo con oportunidades pasadas", bias: "anclaje" },
                            { text: "Analizo mÃ©tricas y fundamentales actuales", bias: "none" },
                            { text: "ConfÃ­o en mi intuiciÃ³n de mercado", bias: "confianza" },
                            { text: "Veo quÃ© estÃ¡ haciendo el mercado", bias: "manada" }
                        ]
                    },
                    {
                        question: "Cuando enfrento una decisiÃ³n de inversiÃ³n compleja:",
                        options: [
                            { text: "Busco informaciÃ³n que apoye mi idea inicial", bias: "confirmacion" },
                            { text: "Considero mÃºltiples escenarios y resultados", bias: "none" },
                            { text: "Recuerdo decisiones exitosas similares", bias: "anclaje" },
                            { text: "Sigo las recomendaciones de la mayorÃ­a", bias: "manada" }
                        ]
                    },
                    {
                        question: "Mi tolerancia al riesgo se basa en:",
                        options: [
                            { text: "Mis experiencias pasadas con pÃ©rdidas", bias: "anclaje" },
                            { text: "Mi capacidad financiera actual y objetivos", bias: "none" },
                            { text: "Mi confianza en mis habilidades", bias: "confianza" },
                            { text: "Lo que otros consideran seguro", bias: "manada" }
                        ]
                    },
                    {
                        question: "Al rebalancear mi cartera:",
                        options: [
                            { text: "Mantengo las que 'me han dado suerte'", bias: "dotacion" },
                            { text: "Sigo criterios objetivos de asignaciÃ³n", bias: "none" },
                            { text: "Espero a recuperar pÃ©rdidas primero", bias: "perdidas" },
                            { text: "Hago lo que hacen los fondos exitosos", bias: "manada" }
                        ]
                    },
                    {
                        question: "Cuando estudio un nuevo sector de inversiÃ³n:",
                        options: [
                            { text: "Solo busco informaciÃ³n positiva", bias: "confirmacion" },
                            { text: "Analizo pros y contras exhaustivamente", bias: "none" },
                            { text: "ConfÃ­o en mi conocimiento previo", bias: "confianza" },
                            { text: "Veo dÃ³nde estÃ¡n invirtiendo los demÃ¡s", bias: "manada" }
                        ]
                    },
                    {
                        question: "Mi enfoque para el anÃ¡lisis tÃ©cnico es:",
                        options: [
                            { text: "Me fijo en niveles histÃ³ricos clave", bias: "anclaje" },
                            { text: "Uso mÃºltiples indicadores objetivos", bias: "none" },
                            { text: "ConfÃ­o en pocos indicadores que domino", bias: "confianza" },
                            { text: "Sigo las estrategias populares", bias: "manada" }
                        ]
                    },
                    {
                        question: "Al tomar decisiones bajo presiÃ³n:",
                        options: [
                            { text: "Evito decisiones para no perder", bias: "perdidas" },
                            { text: "Mantengo disciplina y estrategia", bias: "none" },
                            { text: "ConfÃ­o en mi instinto", bias: "confianza" },
                            { text: "Hago lo que hace la mayorÃ­a", bias: "manada" }
                        ]
                    },
                    {
                        question: "Mi filosofÃ­a de inversiÃ³n personal:",
                        options: [
                            { text: "Nunca arriesgues lo que no puedes perder", bias: "perdidas" },
                            { text: "Diversifica y mantÃ©n disciplina", bias: "none" },
                            { text: "El Ã©xito viene de la confianza", bias: "confianza" },
                            { text: "Sigue a los ganadores del mercado", bias: "manada" }
                        ]
                    }
                ]
            }
        };

        // Ejercicios especÃ­ficos para cada sesgo
        const exercisesData = {
            anclaje: [
                {
                    title: "Ejercicio: Rompiendo el Ancla",
                    description: "Imagina que compraste acciones de XYZ a $50. Ahora valen $30. Â¿QuÃ© harÃ­as?",
                    options: [
                        { text: "Esperar a que vuelvan a $50 para vender", bias: true, feedback: "Â¡Cuidado! EstÃ¡s anclado al precio de compra." },
                        { text: "Analizar la situaciÃ³n actual de la empresa", bias: false, feedback: "Â¡Excelente! EstÃ¡s evaluando la situaciÃ³n objetivamente." },
                        { text: "Comprar mÃ¡s para bajar el promedio", bias: true, feedback: "Peligro: estÃ¡s reforzando el anclaje." },
                        { text: "Vender todo inmediatamente", bias: false, feedback: "Aunque drÃ¡stico, no estÃ¡s anclado al precio pasado." }
                    ]
                },
                {
                    title: "Ejercicio: EvaluaciÃ³n Independiente",
                    description: "Una casa que viste el aÃ±o pasado costaba $300,000. Ahora similar cuesta $350,000. Â¿La compras?",
                    options: [
                        { text: "No, porque el aÃ±o pasado era mÃ¡s barata", bias: true, feedback: "EstÃ¡s anclado al precio pasado." },
                        { text: "Analizo el valor actual y las condiciones del mercado", bias: false, feedback: "Â¡Perfecto! EvaluaciÃ³n objetiva." },
                        { text: "Espero a que baje a $300,000", bias: true, feedback: "El anclaje te estÃ¡ limitando." },
                        { text: "La compro solo si el precio parece justo hoy", bias: false, feedback: "Buena decisiÃ³n, enfocada en el presente." }
                    ]
                }
            ],
            perdidas: [
                {
                    title: "Ejercicio: Aceptando el Riesgo",
                    description: "Tienes $10,000. OpciÃ³n A: 100% seguro de mantener $10,000. OpciÃ³n B: 80% de ganar $4,000, 20% de perder $2,000. Â¿QuÃ© eliges?",
                    options: [
                        { text: "OpciÃ³n A: Prefiero no arriesgar", bias: true, feedback: "AversiÃ³n a pÃ©rdidas detectada." },
                        { text: "OpciÃ³n B: Acepto el riesgo calculado", bias: false, feedback: "Â¡Bien! EstÃ¡s evaluando matemÃ¡ticamente." },
                        { text: "Depende de mi estado de Ã¡nimo", bias: true, feedback: "Las emociones estÃ¡n influyendo." },
                        { text: "Invierto parte en A y parte en B", bias: false, feedback: "Estrategia de diversificaciÃ³n inteligente." }
                    ]
                },
                {
                    title: "Ejercicio: Corte de PÃ©rdidas",
                    description: "Una acciÃ³n cayÃ³ 25%. Analistas dicen que podrÃ­a caer mÃ¡s. Â¿QuÃ© haces?",
                    options: [
                        { text: "Espero a recuperar mi inversiÃ³n", bias: true, feedback: "AversiÃ³n a pÃ©rdidas te paraliza." },
                        { text: "Vendo para limitar pÃ©rdidas", bias: false, feedback: "DecisiÃ³n racional de gestiÃ³n de riesgo." },
                        { text: "Compro mÃ¡s para bajar el promedio", bias: true, feedback: "Peligro: estÃ¡s aumentando la exposiciÃ³n." },
                        { text: "Analizo el fundamento antes de decidir", bias: false, feedback: "AnÃ¡lisis objetivo, excelente." }
                    ]
                }
            ],
            confirmacion: [
                {
                    title: "Ejercicio: Buscando Contradicciones",
                    description: "Crees que la empresa ABC es una buena inversiÃ³n. Encuentras un informe negativo. Â¿QuÃ© haces?",
                    options: [
                        { text: "Ignoro el informe, debe estar equivocado", bias: true, feedback: "Sesgo de confirmaciÃ³n claro." },
                        { text: "Busco mÃ¡s informaciÃ³n que apoye mi tesis", bias: true, feedback: "Reforzando el sesgo." },
                        { text: "Analizo el informe crÃ­ticamente", bias: false, feedback: "Â¡Excelente! Mente abierta." },
                        { text: "Busco opiniones contrarias para tener balance", bias: false, feedback: "Perfecto, buscando perspectiva completa." }
                    ]
                },
                {
                    title: "Ejercicio: AnÃ¡lisis MÃºltiple",
                    description: "Antes de invertir, Â¿quÃ© tipo de informaciÃ³n buscas?",
                    options: [
                        { text: "Solo noticias positivas sobre la empresa", bias: true, feedback: "Sesgo de confirmaciÃ³n activo." },
                        { text: "Opiniones que coinciden con la mÃ­a", bias: true, feedback: "Buscando validaciÃ³n, no verdad." },
                        { text: "InformaciÃ³n balanceada, pros y contras", bias: false, feedback: "Â¡Ideal! AnÃ¡lisis completo." },
                        { text: "CrÃ­ticas y riesgos principalmente", bias: false, feedback: "Buen enfoque, evaluando riesgos." }
                    ]
                }
            ],
            confianza: [
                {
                    title: "Ejercicio: Humildad Inversora",
                    description: "Tu Ãºltima inversiÃ³n tuvo 50% de ganancia. Â¿QuÃ© piensas?",
                    options: [
                        { text: "Soy un genio de la inversiÃ³n", bias: true, feedback: "Exceso de confianza peligroso." },
                        { text: "Tuve suerte, el mercado ayudÃ³", bias: false, feedback: "Perspectiva realista y humilde." },
                        { text: "Mi estrategia es infalible", bias: true, feedback: "Confianza excesiva detectada." },
                        { text: "Analizo quÃ© factores contribuyeron al Ã©xito", bias: false, feedback: "AnÃ¡lisis objetivo, excelente." }
                    ]
                },
                {
                    title: "Ejercicio: EvaluaciÃ³n de Habilidades",
                    description: "Â¿Con quÃ© frecuencia crees que puedes superar al mercado?",
                    options: [
                        { text: "Siempre, tengo el don", bias: true, feedback: "Confianza peligrosamente alta." },
                        { text: "La mayorÃ­a de las veces", bias: true, feedback: "Sobreestimando habilidades." },
                        { text: "Algunas veces, con buena investigaciÃ³n", bias: false, feedback: "Expectativas realistas." },
                        { text: "Es difÃ­cil, busco ayuda profesional", bias: false, feedback: "Humildad y sabidurÃ­a." }
                    ]
                }
            ],
            manada: [
                {
                    title: "Ejercicio: Pensamiento Independiente",
                    description: "Todos tus amigos estÃ¡n comprando criptomonedas. Â¿QuÃ© haces?",
                    options: [
                        { text: "Compro inmediatamente para no quedarme afuera", bias: true, feedback: "Mentalidad de manada pura." },
                        { text: "Pregunto cuÃ¡nto ganaron para seguirlos", bias: true, feedback: "Siguiendo al grupo sin anÃ¡lisis." },
                        { text: "Investigo por mi cuenta antes de decidir", bias: false, feedback: "Â¡Excelente! Pensamiento independiente." },
                        { text: "Espero a ver si es una burbuja", bias: false, feedback: "Cautela y anÃ¡lisis, bueno." }
                    ]
                },
                {
                    title: "Ejercicio: AnÃ¡lisis vs Popularidad",
                    description: "Una acciÃ³n es muy popular en redes sociales. Â¿La compras?",
                    options: [
                        { text: "SÃ­, si todos la compran debe ser buena", bias: true, feedback: "Siguiendo la manada ciegamente." },
                        { text: "Compro si veo que muchos ganan dinero", bias: true, feedback: "DecisiÃ³n basada en FOMO." },
                        { text: "Analizo los fundamentos de la empresa", bias: false, feedback: "AnÃ¡lisis objetivo, perfecto." },
                        { text: "Me pregunto por quÃ© es tan popular primero", bias: false, feedback: "Curiosidad saludable y crÃ­tica." }
                    ]
                }
            ],
            dotacion: [
                {
                    title: "Ejercicio: Desapego Inversor",
                    description: "Tienes acciones que compraste hace aÃ±os con pÃ©rdidas. Â¿QuÃ© haces?",
                    options: [
                        { text: "Las mantengo porque son mÃ­as", bias: true, feedback: "Efecto dotaciÃ³n claro." },
                        { text: "Las vendo aunque duela", bias: false, feedback: "DecisiÃ³n racional, desapego." },
                        { text: "Espero a recuperar aunque tarde aÃ±os", bias: true, feedback: "Apego irracional al activo." },
                        { text: "EvalÃºo si las volverÃ­a a comprar hoy", bias: false, feedback: "Perspectiva objetiva, excelente." }
                    ]
                },
                {
                    title: "Ejercicio: EvaluaciÃ³n Neutral",
                    description: "Â¿CÃ³mo decides vender una acciÃ³n de tu cartera?",
                    options: [
                        { text: "Me cuesta vender, son como familia", bias: true, feedback: "Apego emocional fuerte." },
                        { text: "Solo si tengo ganancias importantes", bias: true, feedback: "Efecto dotaciÃ³n en decisiones." },
                        { text: "Basado en anÃ¡lisis objetivo del futuro", bias: false, feedback: "DecisiÃ³n racional y desapegada." },
                        { text: "Cuando encuentro mejores oportunidades", bias: false, feedback: "Enfoque pragmÃ¡tico y objetivo." }
                    ]
                }
            ]
        };

        // Escenarios de simulaciÃ³n
        const scenariosData = {
            crash: {
                title: "Crash del Mercado",
                description: "El mercado ha caÃ­do 20% en la Ãºltima semana debido a noticias econÃ³micas negativas. Tienes una cartera diversificada que tambiÃ©n ha sido afectada.",
                question: "Â¿QuÃ© decisiÃ³n tomas?",
                options: [
                    { text: "Vendo todo antes de que siga cayendo", bias: "perdidas", feedback: "ReacciÃ³n de pÃ¡nico por aversiÃ³n a pÃ©rdidas." },
                    { text: "Mantengo todo, el mercado siempre se recupera", bias: "anclaje", feedback: "Anclado a la creencia de recuperaciÃ³n inevitable." },
                    { text: "Vendo las pÃ©rdidas y mantengo las ganadoras", bias: "dotacion", feedback: "Efecto dotaciÃ³n: proteges lo que 'funciona'." },
                    { text: "Rebalanceo estratÃ©gicamente", bias: "none", feedback: "Â¡Excelente! DecisiÃ³n racional y estratÃ©gica." }
                ]
            },
            bubble: {
                title: "Burbuja TecnolÃ³gica",
                description: "Las acciones de tecnologÃ­a han subido 50% en 3 meses. Todos en tu entorno estÃ¡n comprando y hablando de ganancias fÃ¡ciles.",
                question: "Â¿QuÃ© haces con tu dinero?",
                options: [
                    { text: "Invierto todo en tecnologÃ­a ahora mismo", bias: "manada", feedback: "Siguiendo la manada sin anÃ¡lisis." },
                    { text: "Espero a que suba mÃ¡s para entrar", bias: "confianza", feedback: "Exceso de confianza en predecir el mercado." },
                    { text: "Invierto una pequeÃ±a parte para probar", bias: "perdidas", feedback: "AversiÃ³n a pÃ©rdidas: entras con cautela." },
                    { text: "Analizo si los fundamentos justifican el precio", bias: "none", feedback: "Â¡Perfecto! AnÃ¡lisis fundamental objetivo." }
                ]
            },
            inheritance: {
                title: "Herencia Inesperada",
                description: "Acabas de recibir $50,000 de herencia. Es dinero que no esperabas y quieres invertirlo sabiamente.",
                question: "Â¿QuÃ© enfoque tomas?",
                options: [
                    { text: "Lo invierto todo en lo que recomiendan", bias: "manada", feedback: "Siguiendo recomendaciones sin criterio." },
                    { text: "Lo guardo en efectivo por seguridad", bias: "perdidas", feedback: "AversiÃ³n extrema a pÃ©rdidas." },
                    { text: "Invierto en lo que yo creo que funcionarÃ¡", bias: "confianza", feedback: "Confianza excesiva en tu criterio." },
                    { text: "Busco asesorÃ­a y diversifico", bias: "none", feedback: "Â¡Excelente! Enfoque prudente y profesional." }
                ]
            },
            portfolio: {
                title: "Rebalanceo de Cartera",
                description: "Tu cartera original era 60% acciones, 40% bonos. Ahora las acciones representan 80% por su buen desempeÃ±o.",
                question: "Â¿QuÃ© acciÃ³n tomas?",
                options: [
                    { text: "Dejo asÃ­, las acciones estÃ¡n funcionando", bias: "confirmacion", feedback: "Buscando confirmaciÃ³n del Ã©xito pasado." },
                    { text: "Vendo acciones para volver al 60%", bias: "none", feedback: "Â¡Perfecto! Disciplina de rebalanceo." },
                    { text: "Vendo mÃ¡s bonos para comprar mÃ¡s acciones", bias: "confianza", feedback: "Exceso de confianza en la tendencia." },
                    { text: "No vendo nada, espero que siga subiendo", bias: "anclaje", feedback: "Anclado al rendimiento reciente." }
                ]
            },
            hotTip: {
                title: "Tip de InversiÃ³n",
                description: "Un amigo cercano te dice que tiene informaciÃ³n privilegiada sobre una empresa que 'dispararÃ¡' la prÃ³xima semana.",
                question: "Â¿CÃ³mo reaccionas?",
                options: [
                    { text: "Invierto todo inmediatamente", bias: "confianza", feedback: "Confianza excesiva en informaciÃ³n no verificada." },
                    { text: "Invierto una parte por si acaso", bias: "perdidas", feedback: "AversiÃ³n a pÃ©rdidas: entras con cautela." },
                    { text: "Pregunto a mÃ¡s amigos si lo harÃ­an", bias: "manada", feedback: "Buscando validaciÃ³n del grupo." },
                    { text: "Investigo la empresa antes de decidir", bias: "none", feedback: "Â¡Excelente! Due diligence adecuado." }
                ]
            },
            retirement: {
                title: "Plan de Retiro",
                description: "Tienes 35 aÃ±os y quieres planificar tu retiro a 65. Tienes $20,000 ahorrados para empezar.",
                question: "Â¿QuÃ© estrategia eliges?",
                options: [
                    { text: "Invierto todo en acciones de alto crecimiento", bias: "confianza", feedback: "Exceso de confianza en el riesgo." },
                    { text: "Lo guardo en un CD de bajo riesgo", bias: "perdidas", feedback: "AversiÃ³n extrema a pÃ©rdidas." },
                    { text: "Sigo las recomendaciones populares", bias: "manada", feedback: "Siguiendo estrategias de moda." },
                    { text: "Diversifico segÃºn mi perfil de riesgo", bias: "none", feedback: "Â¡Perfecto! Estrategia personalizada y racional." }
                ]
            }
        };

        // Variables globales
        let currentQuestion = 0;
        let testAnswers = [];
        let dominantBias = 'none';
        let trainingScore = 0;
        let currentLevel = 1;
        let currentExercise = 0;
        let currentScenario = null;
        let exercisesCompleted = false;
        let currentTestType = null;
        let testHistory = JSON.parse(localStorage.getItem('testHistory') || '[]');

        // Mostrar secciÃ³n
        function showSection(sectionId) {
            document.querySelectorAll('section').forEach(section => {
                section.classList.add('hidden');
            });
            
            const section = document.getElementById(sectionId);
            if (section) {
                section.classList.remove('hidden');
                section.classList.add('fade-in');
            }

            if (sectionId === 'test') {
                showTestSelector();
            } else if (sectionId === 'training') {
                if (dominantBias !== 'none') {
                    showTrainingContent();
                }
            }
        }

        // Mostrar selector de test
        function showTestSelector() {
            document.getElementById('testSelector').classList.remove('hidden');
            document.getElementById('testInProgress').classList.add('hidden');
            document.getElementById('testHistory').classList.add('hidden');
        }

        // Iniciar test especÃ­fico
        function startTest(testType) {
            currentTestType = testType;
            currentQuestion = 0;
            testAnswers = [];
            
            document.getElementById('testSelector').classList.add('hidden');
            document.getElementById('testInProgress').classList.remove('hidden');
            
            showQuestion();
        }

        // Iniciar test aleatorio
        function startRandomTest() {
            const testTypesArray = Object.keys(testTypes);
            const randomType = testTypesArray[Math.floor(Math.random() * testTypesArray.length)];
            startTest(randomType);
        }

        // Mostrar historial de tests
        function showTestHistory() {
            document.getElementById('testSelector').classList.add('hidden');
            document.getElementById('testHistory').classList.remove('hidden');
            
            const container = document.getElementById('historyContainer');
            
            if (testHistory.length === 0) {
                container.innerHTML = `
                    <div class="text-center">
                        <i class="fas fa-clipboard-list fa-3x text-muted mb-3"></i>
                        <p class="text-muted">AÃºn no has completado ningÃºn test</p>
                    </div>
                `;
            } else {
                container.innerHTML = testHistory.map((test, index) => `
                    <div class="history-item">
                        <div>
                            <strong>${test.testName}</strong>
                            <br>
                            <small class="text-muted">${test.date}</small>
                        </div>
                        <div>
                            <span class="badge bg-primary">${test.dominantBias}</span>
                            <button class="btn btn-sm btn-outline-secondary ms-2" onclick="startTest('${test.testType}')">
                                <i class="fas fa-redo"></i>
                            </button>
                        </div>
                    </div>
                `).join('');
            }
        }

        // Mostrar pregunta
        function showQuestion() {
            const container = document.getElementById('testContainer');
            const test = testTypes[currentTestType];
            const question = test.questions[currentQuestion];
            
            if (question) {
                container.innerHTML = `
                    <div class="test-question">
                        <h4>Pregunta ${currentQuestion + 1} de ${test.questions.length}</h4>
                        <p class="lead">${question.question}</p>
                        <div class="options">
                            ${question.options.map((option, index) => `
                                <button class="option-btn" onclick="selectAnswer('${option.bias}', ${index})">
                                    ${option.text}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                `;
                
                updateProgress();
            } else {
                showTestResults();
            }
        }

        // Seleccionar respuesta
        function selectAnswer(bias, buttonIndex) {
            document.querySelectorAll('.option-btn').forEach((btn, index) => {
                if (index === buttonIndex) {
                    btn.classList.add('selected');
                } else {
                    btn.classList.remove('selected');
                }
            });

            testAnswers.push(bias);

            setTimeout(() => {
                currentQuestion++;
                showQuestion();
            }, 1000);
        }

        // Actualizar barra de progreso
        function updateProgress() {
            const test = testTypes[currentTestType];
            const progress = ((currentQuestion + 1) / test.questions.length) * 100;
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = progress + '%';
            progressBar.textContent = Math.round(progress) + '%';
        }

        // Mostrar resultados del test
        function showTestResults() {
            const container = document.getElementById('testContainer');
            const test = testTypes[currentTestType];
            
            const biasCount = {};
            testAnswers.forEach(answer => {
                if (answer !== 'none') {
                    biasCount[answer] = (biasCount[answer] || 0) + 1;
                }
            });

            dominantBias = Object.keys(biasCount).reduce((a, b) => 
                biasCount[a] > biasCount[b] ? a : b, 'none'
            );

            // Guardar en historial
            const testResult = {
                testType: currentTestType,
                testName: test.name,
                date: new Date().toLocaleDateString('es-ES'),
                dominantBias: dominantBias !== 'none' ? biasesData[dominantBias].title : 'Sin sesgo dominante'
            };
            
            testHistory.unshift(testResult);
            if (testHistory.length > 10) {
                testHistory = testHistory.slice(0, 10);
            }
            localStorage.setItem('testHistory', JSON.stringify(testHistory));

            container.innerHTML = `
                <div class="result-card">
                    <h3><i class="fas fa-trophy"></i> Â¡${test.name} Completado!</h3>
                    <div class="mt-4">
                        ${dominantBias !== 'none' ? `
                            <h4>Tu sesgo dominante: ${biasesData[dominantBias].title}</h4>
                            <p>${biasesData[dominantBias].explanation}</p>
                            <div class="mt-3">
                                <button class="btn btn-primary me-3" onclick="showBiasDetail('${dominantBias}')">
                                    <i class="fas fa-book"></i> Conocer mÃ¡s sobre este sesgo
                                </button>
                                <button class="btn btn-success" onclick="showSection('training')">
                                    <i class="fas fa-dumbbell"></i> Comenzar Entrenamiento
                                </button>
                            </div>
                        ` : `
                            <h4><i class="fas fa-check-circle"></i> Â¡Felicidades!</h4>
                            <p>Pareces tener un buen control sobre tus sesgos cognitivos. Sigue asÃ­ y sigue aprendiendo.</p>
                            <button class="btn btn-primary mt-3" onclick="showSection('training')">
                                <i class="fas fa-dumbbell"></i> Explorar Entrenamiento
                            </button>
                        `}
                    </div>
                    <div class="mt-4">
                        <button class="btn btn-secondary me-2" onclick="showTestSelector()">
                            <i class="fas fa-list"></i> Otro Test
                        </button>
                        <button class="btn btn-outline-secondary" onclick="startRandomTest()">
                            <i class="fas fa-random"></i> Test Aleatorio
                        </button>
                    </div>
                </div>
            `;
        }

        // Mostrar detalle de sesgo
        function showBiasDetail(biasKey) {
            const bias = biasesData[biasKey];
            if (bias) {
                document.getElementById('biasModalTitle').textContent = bias.title;
                document.getElementById('biasModalContent').innerHTML = `
                    <div class="bias-explanation">
                        <h5><i class="fas fa-info-circle"></i> Â¿QuÃ© es?</h5>
                        <p>${bias.explanation}</p>
                    </div>
                    <div class="bias-explanation">
                        <h5><i class="fas fa-chart-line"></i> ExplicaciÃ³n EconÃ³mica</h5>
                        <p>${bias.economic}</p>
                    </div>
                    <div class="bias-explanation">
                        <h5><i class="fas fa-exclamation-triangle"></i> Ejemplo PrÃ¡ctico</h5>
                        <p>${bias.example}</p>
                    </div>
                    <div class="bias-explanation">
                        <h5><i class="fas fa-lightbulb"></i> Estrategia para Controlarlo</h5>
                        <p>${bias.strategy}</p>
                    </div>
                `;
                new bootstrap.Modal(document.getElementById('biasModal')).show();
            }
        }

        // Mostrar contenido de entrenamiento
        function showTrainingContent() {
            document.getElementById('trainingIntro').classList.add('hidden');
            document.getElementById('trainingContent').classList.remove('hidden');
            
            updateTrainingProgress();
            loadExercises();
        }

        // Actualizar progreso de entrenamiento
        function updateTrainingProgress() {
            document.getElementById('currentLevel').textContent = currentLevel;
            document.getElementById('trainingScore').textContent = trainingScore;
            
            const progress = Math.min((trainingScore / 100) * 100, 100);
            const progressBar = document.getElementById('trainingProgressBar');
            progressBar.style.width = progress + '%';
            progressBar.textContent = Math.round(progress) + '%';
        }

        // Cargar ejercicios
        function loadExercises() {
            const container = document.getElementById('exercisesContainer');
            const exercises = dominantBias !== 'none' ? exercisesData[dominantBias] : [];
            
            if (exercises.length > 0 && !exercisesCompleted) {
                container.innerHTML = `
                    <h4 class="text-center mb-4">Ejercicios para ${biasesData[dominantBias].title}</h4>
                    <div id="exerciseContainer">
                        ${loadExercise(exercises[currentExercise])}
                    </div>
                    <div class="text-center mt-4">
                        <button class="btn btn-secondary" onclick="previousExercise()" ${currentExercise === 0 ? 'disabled' : ''}>
                            <i class="fas fa-arrow-left"></i> Anterior
                        </button>
                        <button class="btn btn-primary" onclick="nextExercise()">
                            Siguiente <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                `;
            } else if (exercisesCompleted) {
                showTrainingCompletion();
            } else {
                container.innerHTML = `
                    <div class="result-card">
                        <h4><i class="fas fa-star"></i> Â¡Excelente trabajo!</h4>
                        <p>Has completado todos los ejercicios disponibles. Sigue practicando con los escenarios.</p>
                        <button class="btn btn-primary" onclick="showSection('scenarios')">
                            <i class="fas fa-play"></i> Probar Escenarios
                        </button>
                    </div>
                `;
            }
        }

        // Mostrar resumen de completaciÃ³n de entrenamiento
        function showTrainingCompletion() {
            const container = document.getElementById('exercisesContainer');
            const bias = biasesData[dominantBias];
            
            // Crear efecto de confeti
            createConfetti();
            
            container.innerHTML = `
                <div class="completion-summary">
                    <h3><i class="fas fa-trophy"></i> Â¡Entrenamiento Completado!</h3>
                    <p class="lead">Has completado con Ã©xito todos los ejercicios para ${bias.title}</p>
                    
                    <div class="achievement-badge">
                        <i class="fas fa-medal"></i> PuntuaciÃ³n: ${trainingScore} puntos
                    </div>
                    
                    <div class="learning-points">
                        <h5><i class="fas fa-lightbulb"></i> Puntos Clave Aprendidos:</h5>
                        <ul>
                            ${bias.keyLearnings.map(learning => `<li>${learning}</li>`).join('')}
                        </ul>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button class="btn btn-light nav-btn" onclick="showSection('home')">
                            <i class="fas fa-home"></i> Ir al Inicio
                        </button>
                        <button class="btn btn-info nav-btn" onclick="showSection('scenarios')">
                            <i class="fas fa-play"></i> Practicar Escenarios
                        </button>
                        <button class="btn btn-warning nav-btn" onclick="showSection('tips')">
                            <i class="fas fa-lightbulb"></i> Ver Consejos
                        </button>
                        <button class="btn btn-success nav-btn" onclick="resetTraining()">
                            <i class="fas fa-redo"></i> Repetir Entrenamiento
                        </button>
                    </div>
                </div>
            `;
        }

        // Crear efecto de confeti
        function createConfetti() {
            const colors = ['#e74c3c', '#3498db', '#2ecc71', '#f39c12', '#9b59b6'];
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 3 + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 3000);
                }, i * 100);
            }
        }

        // Resetear entrenamiento
        function resetTraining() {
            exercisesCompleted = false;
            currentExercise = 0;
            trainingScore = 0;
            showTrainingContent();
        }

        // Cargar ejercicio individual
        function loadExercise(exercise) {
            return `
                <div class="exercise-card">
                    <h5><i class="fas fa-brain"></i> ${exercise.title}</h5>
                    <p class="lead">${exercise.description}</p>
                    <div class="options">
                        ${exercise.options.map((option, index) => `
                            <button class="option-btn" onclick="answerExercise(${index}, ${option.bias})">
                                ${option.text}
                            </button>
                        `).join('')}
                    </div>
                    <div id="exerciseFeedback"></div>
                </div>
            `;
        }

        // Responder ejercicio
        function answerExercise(optionIndex, hasBias) {
            const exercises = dominantBias !== 'none' ? exercisesData[dominantBias] : [];
            const exercise = exercises[currentExercise];
            const option = exercise.options[optionIndex];
            
            document.querySelectorAll('.option-btn').forEach((btn, index) => {
                if (index === optionIndex) {
                    btn.classList.add('selected');
                } else {
                    btn.classList.remove('selected');
                }
            });

            const feedbackDiv = document.getElementById('exerciseFeedback');
            feedbackDiv.innerHTML = `
                <div class="${hasBias ? 'feedback-incorrect' : 'feedback-correct'}">
                    <h6><i class="fas fa-${hasBias ? 'exclamation-triangle' : 'check-circle'}"></i> ${hasBias ? 'Sesgo Detectado' : 'Â¡Buena DecisiÃ³n!'}</h6>
                    <p>${option.feedback}</p>
                </div>
            `;

            if (!hasBias) {
                trainingScore += 10;
                updateTrainingProgress();
            }
        }

        // NavegaciÃ³n de ejercicios
        function nextExercise() {
            const exercises = dominantBias !== 'none' ? exercisesData[dominantBias] : [];
            if (currentExercise < exercises.length - 1) {
                currentExercise++;
                loadExercises();
            } else {
                exercisesCompleted = true;
                loadExercises();
            }
        }

        function previousExercise() {
            if (currentExercise > 0) {
                currentExercise--;
                loadExercises();
            }
        }

        // Iniciar escenario
        function startScenario(scenarioKey) {
            currentScenario = scenariosData[scenarioKey];
            const container = document.getElementById('scenarioContainer');
            
            container.classList.remove('hidden');
            container.innerHTML = `
                <div class="simulation-container">
                    <h4><i class="fas fa-play-circle"></i> ${currentScenario.title}</h4>
                    <p class="lead">${currentScenario.description}</p>
                    <div class="mt-4">
                        <h5>${currentScenario.question}</h5>
                        <div class="options">
                            ${currentScenario.options.map((option, index) => `
                                <button class="option-btn" onclick="answerScenario(${index}, '${option.bias}')">
                                    ${option.text}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                    <div id="scenarioFeedback"></div>
                    <div class="text-center mt-4">
                        <button class="btn btn-secondary" onclick="resetScenario()">
                            <i class="fas fa-redo"></i> Reiniciar Escenario
                        </button>
                    </div>
                </div>
            `;
            
            container.scrollIntoView({ behavior: 'smooth' });
        }

        // Responder escenario
        function answerScenario(optionIndex, bias) {
            const option = currentScenario.options[optionIndex];
            
            document.querySelectorAll('.option-btn').forEach((btn, index) => {
                if (index === optionIndex) {
                    btn.classList.add('selected');
                } else {
                    btn.classList.remove('selected');
                }
            });

            const feedbackDiv = document.getElementById('scenarioFeedback');
            feedbackDiv.innerHTML = `
                <div class="${bias === 'none' ? 'feedback-correct' : 'feedback-incorrect'} mt-4">
                    <h6><i class="fas fa-${bias === 'none' ? 'check-circle' : 'exclamation-triangle'}"></i> ${bias === 'none' ? 'Â¡Excelente DecisiÃ³n!' : 'Sesgo Identificado'}</h6>
                    <p>${option.feedback}</p>
                    ${bias !== 'none' ? `
                        <button class="btn btn-sm btn-outline-light mt-2" onclick="showBiasDetail('${bias}')">
                            <i class="fas fa-book"></i> Aprender sobre ${biasesData[bias].title}
                        </button>
                    ` : ''}
                </div>
            `;

            if (bias === 'none') {
                trainingScore += 15;
                updateTrainingProgress();
            }
        }

        // Reiniciar escenario
        function resetScenario() {
            document.getElementById('scenarioFeedback').innerHTML = '';
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
        }

        // Inicializar la pÃ¡gina
        document.addEventListener('DOMContentLoaded', function() {
            showSection('home');
        });
    </script>
</body>
</html>
